(self["webpackChunkDataMonitoring"]=self["webpackChunkDataMonitoring"]||[]).push([[778],{9388:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dslfp"},[i("div",{staticStyle:{display:"flex","justify-content":"center",margin:"10px 0 15px 0"}},[i("el-input",{staticStyle:{width:"400px","margin-right":"8px"},attrs:{placeholder:"通过用户名搜索用户..."},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.doSearch}},[e._v("搜索")])],1),i("div",{staticClass:"admin-container "},e._l(e.admins,(function(t,n){return i("el-card",{key:n,staticClass:"admin-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("账号："+e._s(t.username))]),i("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#ff0000"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.deleteAdmin(t)}}})],1),i("div",[i("el-popover",{attrs:{placement:"right",title:"角色列表",width:"200",trigger:"click"},on:{show:function(i){return e.showPop(t)},hide:function(i){return e.hidePop(t)}}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.rolesche,callback:function(t){e.rolesche=t},expression:"rolesche"}},e._l(e.allRoles,(function(e,t){return i("el-option",{key:t,attrs:{label:e.grade_name,value:e.id}})})),1),i("el-button",{attrs:{slot:"reference",type:"text",icon:"el-icon-more"},slot:"reference"})],1)],1)])})),1),i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper, ->, total","page-size":e.pageSize,total:e.total},on:{"current-change":e.currentChange}})],1)])},s=[],r={name:"sys_zabbix_user_up",data(){return{userPage:1,total:0,pageSize:20,allRoles:"",rolesche:[],filter:"",admins:[],keywords:""}},mounted(){this.initAdmins()},methods:{currentChange(e){this.userPage=e,this.initAdmins()},hidePop(e){let t=!1,i="";this.rolesche.forEach((e=>{i+=","+e}));let n=i.replace(/^,+/,"").replace(/,+$/,"");if(e.grade!=n&&(t=!0),t){let t="/home/User/user_update/uid/"+e.id;t=t+"/gradeid/"+n,console.log(t),this.putRequest(t).then((e=>{200==e.code&&this.initAdmins()}))}},showPop(e){this.initAllRoles(),this.rolesche=[];let t=e.grade.split(",");t.forEach((e=>{this.rolesche.push(parseInt(e))}))},initAllRoles(){this.getRequest("/home/Grade/grade_list/gradeSize/9999999").then((e=>{200==e.code&&(this.allRoles=e.data)}))},deleteAdmin(e){this.$confirm("此操作将永久删除该用户列表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},doSearch(){this.filter="/userName/"+this.keywords,this.initAdmins()},initAdmins(){let e="/home/User/user_list"+this.filter+"/userPage/"+this.userPage;this.getRequest(e).then((e=>{200==e.code&&(this.admins=e.data,this.total=e.count)}))}}},a=r,l=i(1001),o=(0,l.Z)(a,n,s,!1,null,null,null),c=o.exports},5778:function(e,t,i){var n={"./user_list.vue":9388};function s(e){var t=r(e);return i(t)}function r(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id=5778}}]);
//# sourceMappingURL=778.d20f8fbd.js.map